#!/bin/zsh
alias -g bg="&> /dev/null &"

alias -s txt="$EDITOR"
alias -s {jpg,png,bmp}="$IMAGE_VIEWER"
alias -s md="$IDlE"

if [ -x /usr/bin/dircolors ]; then
	test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
	alias ls='ls --color=auto'
	alias dir='dir --color=auto'
	alias vdir='vdir --color=auto'
	alias grep='grep --color=auto'
	alias egrep='egrep --color=auto'
	alias fgrep='fgrep --color=auto'
fi

alias cp="cp --interactive --verbose"
alias mv="mv --interactive --verbose"
alias rm="rm --verbose"
alias df='df --human-readable'
alias lsblk="lsblk --fs"
alias umount="umount --verbose --recursive --force"
alias free="free --mebi --total"
alias wget="wget --continue"
alias rsync="rsync --human-readable --progress --verbose"
alias ffmpeg='ffmpeg -hide_banner -y'
alias mpv="mpv --player-operation-mode=pseudo-gui"
alias rg="rg --sort path"

alias pacman="sudo pacman --color auto"
alias upgrade='sudo pacman -Syyu'
# alias install='sudo pacman -Syu && sudo pacman -Syu'
alias refresh='sudo pacman -Syy'
# alias remove='sudo pacman -Rsn'
alias pacsyu='sudo pacman -Syyu'			# Update only standard pkgs
alias yaysua='yay -Sua --noconfirm'			# Update only AUR pkgs
alias yaysyu='yay -Syu --noconfirm'			# Update standard pkgs and AUR pkgs
alias unlock='sudo rm /var/lib/pacman/db.lck'
alias rmpacmanlock="sudo rm /var/lib/pacman/db.lck"
alias cleanup='sudo pacman -Rns $(pacman -Qtdq)'	# Remove orphaned packages
#alias mirror1='sudo reflector --verbose --latest 30 --sort rate --save /etc/pacman.d/mirrorlist'
alias mirror1='sudo reflector --verbose --fastest 20 --latest 20 --number 20 --sort rate --save /etc/pacman.d/mirror'
alias mirror2='sudo reflector -f 30 -l 30 --number 10 --verbose --save /etc/pacman.d/mirror'	# Get fastest mirrors
alias mirror3='sudo pacman-mirrors -g'
alias mirror="sudo reflector -f 30 -l 30 --number 10 --verbose --save /etc/pacman.d/mirrorlist"
alias mirrord="sudo reflector --latest 30 --number 10 --sort delay --save /etc/pacman.d/mirrorlist"
alias mirrors="sudo reflector --latest 30 --number 10 --sort score --save /etc/pacman.d/mirrorlist"
alias mirrora="sudo reflector --latest 30 --number 10 --sort age --save /etc/pacman.d/mirrorlist"
#our experimental - best option for the moment
alias mirrorx="sudo reflector --age 6 --latest 20  --fastest 20 --threads 5 --sort rate --protocol https --save /etc/pacman.d/mirrorlist"
alias mirrorxx="sudo reflector --age 6 --latest 20  --fastest 20 --threads 20 --sort rate --protocol https --save /etc/pacman.d/mirrorlist"

alias ram='rate-mirrors --allow-root arch | sudo tee /etc/pacman.d/mirrorlist'
# paru as aur helper - updates everything
alias pksyua="paru -Syu --noconfirm"
alias upall="paru -Syu --noconfirm"

#Cleanup orphaned packages
alias cleanup='sudo pacman -Rns $(pacman -Qtdq)'

#skip integrity check
alias paruskip='paru -S --mflags --skipinteg'
alias yayskip='yay -S --mflags --skipinteg'
alias trizenskip='trizen -S --skipinteg'

#Recent Installed Packages
alias rip="expac --timefmt='%Y-%m-%d %T' '%l\t%n %v' | sort | tail -200 | nl"
alias riplong="expac --timefmt='%Y-%m-%d %T' '%l\t%n %v' | sort | tail -3000 | nl"

# For when keys break
alias archlinx-fix-keys="sudo pacman-key --init && sudo pacman-key --populate archlinux && sudo pacman-key --refresh-keys"

alias ..='cd ..' 
alias .2='cd ../..'
alias .3='cd ../../..'
alias .4='cd ../../..'
alias .5='cd ../../../..'
alias .6='cd ../../../../..'

alias la='ls -a'
alias ll='ls -al'
alias l.="ls -A | egrep '^\.'"

alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'
alias rmgitcache="rm -r ~/.cache/git"
# alias m="git checkout main"
# alias s="git checkout stable"

alias userlist="cut -d: -f1 /etc/passwd"
alias workspaces='prop -root _NET_DESKTOP_NAMES'
alias desktops="ls /usr/share/xsessions"
alias monitors="xrandr -q"

alias whichvga="arcolinux-which-vga"
alias probe="sudo -E hw-probe -all -upload"
alias hw="hwinfo --short"
alias microcode='grep . /sys/devices/system/cpu/vulnerabilities/*'

#ps
alias psa="ps auxf"
alias psgrep="ps aux | grep -v grep | grep -i -e VSZ -e"
alias psmem='ps auxf | sort -nr -k 4 | head -5'
alias pscpu='ps auxf | sort -nr -k 3 | head -5'

# systmectl
alias sysfailed="systemctl list-units --failed"
alias syslistenabled="systemctl list-unit-files --state=enabled"

alias mount-iso='sudo mount -o loop --target /mnt/iso --source'
alias mount-usb='sudo mount -o loop --target /mnt/usb --source /dev/sdb'
alias mount-dvd='sudo mount -o ro,loop --target /mnt/dvd --source /dev/sr0'
alias mount-phone="aft-mtp-mount $PHONE"

alias umount-iso='sudo umount /mnt/iso'
alias umount-usb='udiskie-umount /mnt/PENDRIVE'
alias umount-dvd='sudo umount /mnt/dvd'
alias umount-phone="fusermount -u $PHONE"

alias yt='youtube-dl'
alias yta='yt --extract-audio --audio-format mp3 --audio-quality 192k'
alias yta-aac="yt --extract-audio --audio-format aac "
alias yta-best="yt --extract-audio --audio-format best "
alias yta-flac="yt --extract-audio --audio-format flac "
alias yta-m4a="yt --extract-audio --audio-format m4a "
alias yta-mp3="yt --extract-audio --audio-format mp3 "
alias yta-opus="yt --extract-audio --audio-format opus "
alias yta-vorbis="yt --extract-audio --audio-format vorbis "
alias yta-wav="yt --extract-audio --audio-format wav "
alias ytv="yt --format 'best[ext = mp4][height <= 480]'"
alias ytv-best="yt --format bestvideo+bestaudio "

alias gpg-check="gpg2 --keyserver-options auto-key-retrieve --verify"
alias gpg-check-fix="gpg2 --keyserver-options auto-key-retrieve --verify"
alias gpg-retrieve="gpg2 --keyserver-options auto-key-retrieve --receive-keys"
alias fix-keyserver="[ -d ~/.gnupg ] || mkdir ~/.gnupg ; cp /etc/pacman.d/gnupg/gpg.conf ~/.gnupg/ ; echo 'done'"

alias jctl='journalctl -p 3 -xb'
alias big="expac -H M '%m\t%n' | sort -h | nl"
alias downgrada="sudo downgrade --ala-url https://ant.seedhost.eu/arcolinux/"
alias unhblock="hblock -S none -D none"
alias update-fc='sudo fc-cache -fv'

#fixes
alias fix-permissions="sudo chown -R $USER:$USER ~/.config ~/.local"
alias keyfix="/usr/local/bin/arcolinux-fix-pacman-databases-and-keys"
alias key-fix="/usr/local/bin/arcolinux-fix-pacman-databases-and-keys"
alias fixkey="/usr/local/bin/arcolinux-fix-pacman-databases-and-keys"
alias fix-key="/usr/local/bin/arcolinux-fix-pacman-databases-and-keys"
alias fix-sddm-config="/usr/local/bin/arcolinux-fix-sddm-config"
alias fix-pacman-conf="/usr/local/bin/arcolinux-fix-pacman-conf"
alias fix-pacman-keyserver="/usr/local/bin/arcolinux-fix-pacman-gpg-conf"

# alias emacs="~/.local/bin/emacs"
e()     { pgrep emacs && emacsclient -n "$@" || emacs -nw "$@" }
ediff() { emacs -nw --eval "(ediff-files \"$1\" \"$2\")"; }
eman()  { emacs -nw --eval "(switch-to-buffer (man \"$1\"))"; }
ekill() { emacsclient --eval '(kill-emacs)'; }

alias mocp="mocp --config ~/.config/moc/config"
# alias vifm="$HOME/.config/vifm/scripts/vifmrun"
alias rtorrent="~/.config/rtorrent/start"
alias figlet="figlet -f ~/.config/figlet/fonts/ANSI\ Shadow.flf"
alias alacritty='LIBGL_ALWAYS_SOFTWARE=1 alacritty'
{ command -v nvim &> /dev/null } && alias vi='nvim' || alias vi='vim'
{ command -v neomutt &> /dev/null } && alias mutt='neomutt'

# x11
alias merge="xrdb -merge ~/.config/xorg/xresources"

# Grub
alias update-grub="sudo grub-mkconfig -o /boot/grub/grub.cfg"

alias ssn="sudo shutdown now"
alias sr="sudo reboot"

# Edit the fstab
alias fstab="sudo $EDITOR /etc/fstab"

# Dotfiles
alias stow='stow --no-folding -d $HOME/repo/rgomezgerardi/dotfiles -t $HOME'

# Switch between shells
alias tobash="sudo chsh $USER -s /bin/bash && echo 'Now log out.'"
alias tozsh="sudo chsh $USER -s /bin/zsh && echo 'Now log out.'"

#switch between lightdm and sddm
alias tolightdm="sudo systemctl enable lightdm.service -f ; echo 'Lightm is active - reboot now'"
alias tosddm="sudo systemctl enable sddm.service -f ; echo 'Sddm is active - reboot now'"

#update betterlockscreen images
alias bls="betterlockscreen -u /usr/share/backgrounds/arcolinux/"
